[i]What do you mean that you haven't decided what your role is? You can't just sit on the fence when terrorism is involved![/i]
 
You have to use [URL=https://steamcommunity.com/sharedfiles/filedetails/?id=1357204556]TTT2[/URL] in order to use this role. Additionally using [URL=https://steamcommunity.com/sharedfiles/filedetails/?id=1362430347]ULX for TTT2[/URL] is recommended. Report bugs concerning this role [URL=https://github.com/AaronMcKenney/ttt2-role_undec]here[/URL] and submit new role ideas [URL=https://github.com/TTT-2/addon-ideas]here[/URL]. A list of all currently available roles can be found [URL=https://steamcommunity.com/sharedfiles/filedetails/?id=1737053146]here[/URL].
 
Discord: [url=https://discord.gg/Npcbb4W]https://discord.gg/Npcbb4W[/url]
Source: [url=https://github.com/AaronMcKenney/ttt2-role_undec]https://github.com/AaronMcKenney/ttt2-role_undec[/url]
 
 
[img]https://i.imgur.com/KeP4fWN.png[/img]
 
The Undecided is a Neutral role who is given 1 minute to "vote" for one of 3 randomly selected roles from a "ballot". They become the role that they vote for (they also get an "I VOTED" sticker, which offers no in-game benefit). If they do not vote within the allotted time, they become a Jester (or an Innocent if the Jester isn't installed) instead. The server owner can configure it so some other bad thing happens instead of becoming a Jester (ex. DEATH).
 
There is additionally an option to make the ballots re-occurring, such that the player will be constantly changing roles throughout the game. This is disabled by default.
 
[h1]How the Ballot is Generated[/h1]
The ballot is generated by first separating the roles that the server has installed (and are valid for the current round) into 5 groups:
1. Innocents (excluding detectives)
2. Detectives
3. Traitors
4. Evil (roles with unique teams. Ex. Serial Killer, Jester, Infected, Marker, Doppelganger)
5. Neutral (Anything that doesn't fit the above 4 groups. Ex. Amnesiac, Drunk, Cursed, Medic)
 
Roles will only be present in the above groups if they could have been selected as starting roles.
Example 1: The Sidekick, Thrall, and Graverobber roles won't be present as they are secondary roles which only appear due to in-game events.
Example 2: The minimum number of players is considered. If 9 players are required for a player to be given the Medic role, but only 6 players are present on the server, then the Medic will not appear on the ballot.
 
Each group has a ConVar that determines its weight, which is used for random selection. The five weights do not have to add up to 100, but it will save you some headaches if they do. For example, if they add up to 100 and ttt2_undecided_weight_innocent is 35, then there is a 35% chance that an Innocent role will be chosen as a selectable option. These weights apply to each entry of the ballot, meaning that that if the ballot has 3 entries then it is possible for each entry to be an Innocent role.
 
A role cannot appear on the ballot multiple times.
 
This role offers support for the following roles that hide their true identity from the player: Shinigami, Wrath, and Lycanthrope. If the server has these roles installed, then they (along with the base Innocent role) will appear as "Innocent*". The player who selects "Innocent*" will [i]probably[/i] become a special Innocent, but they can't know for certain. "Innocent*" can appear on the ballot multiple times, but each entry will correspond to a different role that has been obscured.
 
It is possible for the Undecided role to appear on the ballot. If the Undecided votes for their own role the ballot will be re-rolled and the timer reset.
 
Naturally, this role works best on servers that have numerous roles installed, but a miminalist server is supported. The ballot generation logic is semi-intelligent, and will adjust itself if one or more of the 5 groups is empty.
 
[img]https://i.imgur.com/jIBWtbM.png[/img]
 
Convars are variables that are introduced to allow server owners to customize the gameplay without changing the code. There are always a handful of convars automatically created by TTT2, that define the spawn parameters of this role and are found in ULX. Additionally there might be some role specific convars, which have to be set in the server config file.
 
[h1]Normal Role Convars (also found in ULX):[/h1]
[code]# enable or disable this role
  ttt_undecided_enabled [0/1] (default: 1)
# the percentage of players that are spawned as this role
  ttt_undecided_pct [0.0..1.0] (default: 0.13)
# the limit of players that spawn as this role each round, this overwrites the percentage
  ttt_undecided_max [0..n] (default: 1)
# the probability each round of this role being spawned at all
  ttt_undecided_random [0..100] (default: 30)
# the amount of players needed for this role to spawn
  ttt_undecided_min_players: [0..n] (default: 6)[/code]
 
[h1]Rolespecific Convars:[/h1]
[code]# How many possible roles can the Undecided choose between?
  ttt2_undecided_num_choices [2..n] (default: 3)
# How many seconds does the Undecided have to choose their role?
  ttt2_undecided_ballot_timer [0..n] (default: 60)
# How many seconds after the voting period ends does the Undecided receive another ballot (<=0 to only receive one ballot per game)?
  ttt2_undecided_time_between_ballots [0..n] (default: 0)
# If the Undecided fails to vote, what should happen to them?
  ttt2_undecided_no_vote_punishment_mode [0..3] (default: 3)
  # 0: D E A T H   P E N A L T Y
  # 1: They get randomly assigned a role from the list of choices that they had.
  # 2: They become a regular old Innocent
  # 3: They become a Jester
# What is the weight of the possibiilty for an innocent subrole (including base innocent) from being presented to the Undecided?
  ttt2_undecided_weight_innocent [0..n] (default: 35)
# What is the weight of the possibiilty for a detective subrole (including base detective) from being presented to the Undecided?
  ttt2_undecided_weight_detective [0..n] (default: 5)
# What is the weight of the possibiilty for a traitor subrole (including base traitor) from being presented to the Undecided?
  ttt2_undecided_weight_traitor [0..n] (default: 15)
# What is the weight of the possibiilty for a role that has a team which isn't INNOCENT, TRAITOR, or NONE from being presented to the Undecided?
  ttt2_undecided_weight_evil [0..n] (default: 25)
# What is the weight of the possibiilty for a role that has no discernable team (ex. Amnesiac, Drunk) from being presented to the Undecided?
  ttt2_undecided_weight_neutral [0..n] (default: 20)
# Can the Undecided vote to be an Undecided?
  ttt2_undecided_can_vote_for_self [0/1] (default: 1)[/code]
 
--
[h1]Credits:[/h1]
[URL=https://steamcommunity.com/profiles/76561198025772353/]BlackMagicFine[/URL]: creator of this role addon
[URL=https://steamcommunity.com/id/SmugglesTheButt/]Smuggles[/URL]: designer of the role icon
[URL=https://steamcommunity.com/id/mineotopia]Mineotopia[/URL]: designer of the role thumbnail